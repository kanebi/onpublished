<!DOCTYPE html>
<head>
    <!-- ... existing meta tags ... -->
    <title>OnPublished Waitlist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Add SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Add custom fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f3e7f7 0%, #ffffff 100%);
        }
        .form-input {
            @apply mt-1 block w-full rounded-lg border-gray-300 shadow-sm 
            focus:border-purple-500 focus:ring-purple-500 transition-all duration-200;
        }
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Decorative Elements -->
    <div class="fixed -z-10 top-0 left-0 w-full h-full overflow-hidden">
        <div class="absolute top-0 right-0 bg-purple-200 rounded-full w-96 h-96 -mr-48 -mt-48 opacity-20"></div>
        <div class="absolute bottom-0 left-0 bg-purple-300 rounded-full w-96 h-96 -ml-48 -mb-48 opacity-20"></div>
    </div>

    <div class="min-h-screen flex flex-col items-center py-12 px-4 sm:px-6 lg:px-8 relative">
        <div class="max-w-4xl w-full space-y-12">
            <!-- Enhanced Header -->
            <div class="text-center space-y-6">
                <div class="animate-float">
                    <svg class="w-24 h-24 mx-auto text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12zm-1-5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1zm0-4a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z"/>
                    </svg>
                </div>
                <h1 class="text-5xl font-bold text-purple-900 tracking-tight">Turn Your Research Into Income</h1>
                <p class="mt-2 text-xl text-gray-600 max-w-2xl mx-auto">Be part of something exciting! OnPublished is creating a platform where you can turn your knowledge into income.</p>
            </div>

            <!-- Enhanced User Form -->
            <div class="bg-white p-8 rounded-2xl shadow-xl transform hover:scale-[1.01] transition-all duration-300">
                <h2 class="text-2xl font-semibold text-purple-800 mb-6 flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/>
                    </svg>
                    Join Our Waitlist Today!

                </h2>
                <p class="text-gray-600 mb-6">Get early access to a curated collection of academic research. Be the first to discover groundbreaking papers from leading researchers.</p>
                <form id="userForm" class="space-y-6">
                    <!-- ... existing form fields with updated classes ... -->
                    <input type="text" name="name" required class="form-input" placeholder="Enter your full name">
                    <input type="email" name="email" required class="form-input" placeholder="Enter your email">
                    <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transform hover:scale-[1.02] transition-all duration-200">
                        Join Waitlist â†’
                    </button>
                </form>
            </div>

            <!-- Enhanced Contributor Form -->
            <div class="bg-white p-8 rounded-2xl shadow-xl transform hover:scale-[1.01] transition-all duration-300">
                <h2 class="text-2xl font-semibold text-purple-800 mb-6 flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                    </svg>
                    Join as a Researcher
                </h2>
                <div class="space-y-4 mb-6">
                    <p class="text-gray-600">Join our exclusive network of academic contributors and:</p>
                    <ul class="space-y-3 text-gray-600">
                        <li class="flex items-start">
                            <span class="text-purple-600 mr-2">ðŸ”¹</span>
                            Get Paid for Your Work: Earn money by selling your original research papers.
                        </li>
                        <li class="flex items-start">
                            <span class="text-purple-600 mr-2">ðŸ”¹</span>
                            Take on Special Projects: Earn even more by working on custom paper requests.
                        </li>
                        <li class="flex items-start">
                            <span class="text-purple-600 mr-2">ðŸ”¹</span>
                            Get Early Access: Be among the first to share your work and start earning before we officially launch!
                        </li>
                    </ul>
                </div>
                <form id="contributorForm" class="space-y-6">
                    <input type="text" name="name" required class="form-input" placeholder="Enter your full name">
                    <input type="email" name="email" required class="form-input" placeholder="Enter your email">
                    <input type="text" name="degree" required class="form-input" placeholder="Your highest degree (e.g., Ph.D., Master's)">
                    <input type="number" name="papers" required class="form-input" placeholder="Number of papers published">
                    <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transform hover:scale-[1.02] transition-all duration-200">
                        Join as Contributor â†’
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Initialize Supabase client
        const supabaseUrl = 'https://hexnbihdtixlnyedhqdc.supabase.co'
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhleG5iaWhkdGl4bG55ZWRocWRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI2OTIwNDAsImV4cCI6MjA0ODI2ODA0MH0.Poxryb9bivSimvWY-2jUjPK_qUTBj6I7vOFfZfMUlzo'
        const supabase = supabase.createClient(supabaseUrl, supabaseKey)

        // Enhanced form submission handling
        async function handleSubmission(formData, type) {
            try {
                // Show loading state
                Swal.fire({
                    title: 'Submitting...',
                    html: 'Please wait while we process your registration.',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading()
                    }
                });

                const { data, error } = await supabase
                    .from('waitlist')
                    .insert([{
                        name: formData.get('name'),
                        email: formData.get('email'),
                        degree: formData.get('degree'),
                        papers_published: formData.get('papers'),
                        type: type
                    }])

                if (error) throw error

                // Show success message
                Swal.fire({
                    icon: 'success',
                    title: 'Welcome aboard! ðŸŽ‰',
                    html: `You've successfully joined the OnPublished waitlist.<br>We'll keep you updated on our progress!`,
                    confirmButtonColor: '#7C3AED',
                    showConfirmButton: true,
                });

                return true;
            } catch (error) {
                // Show error message
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: error.message,
                    confirmButtonColor: '#7C3AED',
                    footer: 'Please try again or contact support if the problem persists.'
                });
                return false;
            }
        }

        // User Form Handler
        document.getElementById('userForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const success = await handleSubmission(new FormData(e.target), 'user');
            if (success) e.target.reset();
        });

        // Contributor Form Handler
        document.getElementById('contributorForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const success = await handleSubmission(new FormData(e.target), 'contributor');
            if (success) e.target.reset();
        });
    </script>
</body>
</html>
